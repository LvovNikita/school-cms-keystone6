// This file is automatically generated by Keystone, do not modify it manually.
// Modify your Keystone config when you want to change this.

datasource sqlite {
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
  provider          = "sqlite"
}

generator client {
  provider = "prisma-client-js"
  output   = "node_modules/.prisma/client"
}

model School {
  id                                  String    @id @default(cuid())
  schoolName                          String    @default("")
  schoolNameAbbr                      String    @default("")
  director                            Teacher?  @relation("School_director", fields: [directorId], references: [id])
  directorId                          String?   @map("director")
  address                             String    @default("")
  website                             String    @default("")
  email                               String    @default("")
  phone                               String    @default("")
  fax                                 String    @default("")
  schedule                            String    @default("")
  OGRN                                Int?
  INN                                 Int?
  INNStartDate                        DateTime?
  KPP                                 Int?
  OKOPF                               String    @default("")
  OKFS                                String    @default("")
  licenseRegNumber                    Int?
  licenseSerialNumber                 String    @default("")
  licenseStartDate                    DateTime?
  isLicensePermanent                  Boolean   @default(false)
  licenseEndDate                      DateTime?
  accreditationRegNumber              String    @default("")
  accreditationSerialNumber           String    @default("")
  accreditationStartDate              DateTime?
  accreditationEndDate                DateTime?
  founder                             String    @default("")
  founderAddress                      String    @default("")
  founderWebSite                      String    @default("")
  founderEmail                        String    @default("")
  founderPhone                        String    @default("")
  hasPreSchoolEducationLevel          Boolean   @default(false)
  numOfPreSchoolLevelPupils           Int?      @default(0)
  hasPrimarySchoolEducationLevel      Boolean   @default(true)
  numOfPrimarySchooLevelPupils        Int?
  gradeOneVacantPlaces                Int?      @default(0)
  numOfFirstGrades                    Int?
  numOfSecondGrades                   Int?
  numOfThirdGrades                    Int?
  numOfFourthGrades                   Int?
  hasBasicGeneralSchoolEducationLevel Boolean   @default(true)
  numOfBasicGeneralSchoolLevelPupils  Int?
  gradeFiveVacantPlaces               Int?      @default(0)
  numOfFifthrades                     Int?
  numOfSixthGrades                    Int?
  numOfSeventhGrades                  Int?
  numOfEighthGrades                   Int?
  numOfNenethGrades                   Int?
  hasSecondarySchoolEducationLevel    Boolean   @default(true)
  numOfSecondarySchoolLevelPupils     Int?
  numOfTenthGrades                    Int?
  numOfEleventhGrades                 Int?

  @@index([directorId])
}

model User {
  id           String   @id @default(cuid())
  username     String   @default("")
  password     String
  email        String   @default("")
  teacherRef   Teacher? @relation("User_teacherRef", fields: [teacherRefId], references: [id])
  teacherRefId String?  @map("teacherRef")
  isAdmin      Boolean  @default(false)

  @@index([teacherRefId])
}

model Teacher {
  id                      String    @id @default(cuid())
  firstname               String    @default("")
  lastname                String    @default("")
  middlename              String    @default("")
  dateOfBirth             DateTime?
  position                String?
  subjects                String    @default("")
  email                   String    @default("")
  phone                   String    @default("")
  category                String?
  education               String    @default("")
  educationLevel          String?
  degree                  String?
  academicTitle           String?
  totalYearsExperience    Int?      @default(0)
  teachingExperienceYears Int?      @default(0)
  worksSinceDate          DateTime?
  trainings               String    @default("")
  additionalInfo          String    @default("")
  from_School_director    School[]  @relation("School_director")
  from_User_teacherRef    User[]    @relation("User_teacherRef")
  from_Subject_teacherRef Subject[] @relation("Subject_teacherRef")
}

model MenuItem {
  id                     String     @id @default(cuid())
  title                  String     @default("")
  weigth                 Int?       @default(999)
  subItems               MenuItem[] @relation("MenuItem_subItems")
  slug                   String     @unique @default("")
  pageRef                Page?      @relation("MenuItem_pageRef", fields: [pageRefId], references: [id])
  pageRefId              String?    @unique @map("pageRef")
  isTopLevel             Boolean    @default(false)
  from_MenuItem_subItems MenuItem[] @relation("MenuItem_subItems")
}

model Page {
  id          String    @id @default(cuid())
  title       String    @default("")
  menuItemRef MenuItem? @relation("MenuItem_pageRef")
  blocks      Block[]   @relation("Page_blocks")
}

model Block {
  id               String @id @default(cuid())
  title            String @default("")
  content          String @default("[{\"type\":\"paragraph\",\"children\":[{\"text\":\"\"}]}]")
  from_Page_blocks Page[] @relation("Page_blocks")
}

model NewsPost {
  id              String    @id @default(cuid())
  title           String    @default("")
  content         String    @default("[{\"type\":\"paragraph\",\"children\":[{\"text\":\"\"}]}]")
  publicationDate DateTime? @default(now())
}

model Subject {
  id         String    @id @default(cuid())
  title      String    @default("")
  teacherRef Teacher[] @relation("Subject_teacherRef")
}

model File {
  id            String  @id @default(cuid())
  filename      String  @default("")
  description   String  @default("")
  file_filesize Int?
  file_filename String?
}

model Banner {
  id             String  @id @default(cuid())
  title          String  @default("")
  file_filesize  Int?
  file_extension String?
  file_width     Int?
  file_height    Int?
  file_id        String?
}